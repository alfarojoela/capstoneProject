// Main test file for Room and Item classes

#include <iostream>
#include <string.h>
#include <vector>
#include <time.h>
#include "ConferenceRoom.hpp"
#include "Galley.hpp"
#include "Macready.hpp"
#include "MessHall.hpp"
#include "Hallway1.hpp"
#include "Hallway2.hpp"
#include "SickBay.hpp"
#include "Latrine.hpp"
#include "ResearchLab.hpp"
#include "EquipmentRoom.hpp"
#include "RadioRoom.hpp"
#include "ToolShed.hpp"
#include "DogKennel.hpp"
#include "Basement.hpp"
#include "Garage.hpp"
#include "Player.hpp"
#include "SaveLoad.hpp"

int main()
{
	srand(time(NULL));
	int randomNum1 = 0;
	int randomNum2 = 0;
	std::string locationName = "";
	Room* playerLocation;
	Room* newRoom;

	Player* newPlayer = new Player();

	Item toiletPaper("toilet paper");
	Item blowTorch("blowtorch");
	Item scalpel("scalpel");
	Item petri("petri dish");
	Item gun("gun");
	Item axe("axe");
	Item gin("gin");
	Item rope("rope");
	Item whiskey("whiskey");
	Item flamethrower("flamethrower");
	Item redHerring("red herring");
	Item wire("copper wire");

	std::vector<Item> items;
	items.push_back(toiletPaper);
	items.push_back(blowTorch);
	items.push_back(scalpel);
	items.push_back(petri);
	items.push_back(gun);
	items.push_back(axe);
	items.push_back(gin);
	items.push_back(rope);
	items.push_back(whiskey);
	items.push_back(flamethrower);
	items.push_back(redHerring);
	items.push_back(wire);

	//First room tests
	Galley* newGalley = new Galley();
	newGalley->setRoom();
	Macready* newStart = new Macready();
	newStart->setRoom();
	Hallway1* newHall1 = new Hallway1();
	newHall1->setRoom();
	Hallway2* newHall2 = new Hallway2();
	newHall2->setRoom();
	SickBay* newSick = new SickBay();
	newSick->setRoom();
	Latrine* newLat = new Latrine();
	newLat->setRoom();
	ResearchLab* newLab = new ResearchLab();
	newLab->setRoom();
	EquipmentRoom* newEquip = new EquipmentRoom();
	newEquip->setRoom();
	ToolShed* newTool = new ToolShed();
	newTool->setRoom();
	RadioRoom* newRadio = new RadioRoom();
	newRadio->setRoom();
	MessHall* newMess = new MessHall();
	newMess->setRoom();
	DogKennel* newDog = new DogKennel();
	newDog->setRoom();
	Basement* newBase = new Basement();
	newBase->setRoom();
	Garage* newGar = new Garage();
	newGar->setRoom();
	ConferenceRoom* newCon = new ConferenceRoom();
	newCon->setRoom();

	std::vector<Room*> rooms;
	rooms.push_back(newGalley);
	rooms.push_back(newStart);
	rooms.push_back(newHall1);
	rooms.push_back(newHall2);
	rooms.push_back(newLat);
	rooms.push_back(newSick);
	rooms.push_back(newLab);
	rooms.push_back(newEquip);
	rooms.push_back(newTool);
	rooms.push_back(newRadio);
	rooms.push_back(newMess);
	rooms.push_back(newDog);
	rooms.push_back(newBase);
	rooms.push_back(newGar);
	rooms.push_back(newCon);

	for (unsigned int i = 0; i < items.size(); ++i)
	{
		int number = 0;

		number = rand() % (rooms.size() + 10);

		if (number < 15)
		{
			rooms[number]->addItem(items[i]);
		}
		else
		{
			newPlayer->setInventory(items[i]);
		}
	}

	locationName = rooms[rand() % rooms.size()]->getName();

	for (unsigned int i = 0; i < rooms.size(); ++i)
	{
		newRoom = rooms[i];
		std::cout << "The name of the room is " << newRoom->getName() << std::endl;
		newRoom->displayDescrip();
		newRoom->displayExits();

		randomNum1 = rand() % 2;
		newRoom->setFeatureOne(randomNum1);
		randomNum2 = rand() % 2;
		newRoom->setFeatureOne(randomNum2);
	}

	SaveLoad save;
	save.save(newPlayer, rooms, locationName);
	playerLocation = save.load(newPlayer, rooms);

	std::cout << "Player's location is: " << playerLocation->getName() << std::endl;
}
